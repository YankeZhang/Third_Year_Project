<app-page-title [heading]="heading" [subheading]="subheading" [icon]="icon"></app-page-title>

<ngb-tabset class="tabs-animated tabs-animated-shadow">
  <ngb-tab>
    <ng-template ngbTabTitle><span>Google Maps</span></ng-template>
    <ng-template ngbTabContent>
      <div class="card main-card mb-3">
        <div class="card-body">
          <agm-map
            style="height: 450px;"
            [latitude]="lat"
            [longitude]="lng"
            [zoom]="zoom"
            [disableDefaultUI]="false"
            [zoomControl]="false"
            (mapClick)="mapClicked($event)">

            <agm-marker
              *ngFor="let m of markers; let i = index"
              (markerClick)="clickedMarker(m.label, i)"
              [latitude]="m.lat"
              [longitude]="m.lng"
              [label]="m.label"
              [markerDraggable]="m.draggable"
              (dragEnd)="markerDragEnd(m, $event)">

              <agm-info-window [maxWidth]="320">
                <div class="card-hover-shadow card-border mb-3 card">
                  <div class="dropdown-menu-header">
                    <div class="dropdown-menu-header-inner bg-warning">
                      <div class="menu-header-content">
                        <div><a [routerLink]="" class="avatar-icon-wrapper btn-hover-shine avatar-icon-xl">
                          <div class="avatar-icon rounded"><img
                            src="./assets/images/avatars/ucl-logo.jpg"
                            alt="Avatar 5"></div>
                        </a></div>
                        <div><h5 class="menu-header-title">{{m.label}}</h5></div>
                        
                      </div>
                    </div>
                  </div>
                  <div class="card-body">
                    <p class="mb-0">Students Involved: {{m.student}}</p>
                    <p class="mb-0">Staff Involved: {{m.staff}}</p>
                    <p class="mb-0">Requests: {{m.request}}</p></div>
                  
                </div>
              </agm-info-window>
            </agm-marker>

            <agm-circle [latitude]="lat + 0.3" [longitude]="lng"
                        [radius]="5000"
                        [fillColor]="'red'"
                        [circleDraggable]="true"
                        [editable]="true">
            </agm-circle>

          </agm-map>
        </div>
      </div>
    </ng-template>
  </ngb-tab>
</ngb-tabset>
